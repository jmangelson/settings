#!/usr/bin/env python
"""Python 2.5 script. Creates a Notification pop-up bubble"""
import dbus
import sys, os

if len (sys.argv) != 4:
    print 'Usage: %s [title] [text] [urgency (0, 1, or 2)]' % os.path.basename (sys.argv[0])
    sys.exit (-1)

NONE = 0
IMPORTANT = 1
URGENT = 2

item = "org.freedesktop.Notifications"
path = "/org/freedesktop/Notifications"
interface = "org.freedesktop.Notifications"
app_name = "Test Application"
id_num_to_replace = 0
icon = "/usr/share/icons/Humanity/status/48/gtk-dialog-info.svg"
urgency = int (sys.argv[3])
if urgency == URGENT:
    icon = "/usr/share/icons/Humanity/status/48/dialog-warning.svg"
title = sys.argv[1]
text = sys.argv[2]
actions_list = ''
hint = {'urgency': dbus.Byte (int (sys.argv[3]))}
time = 3000   # Use seconds x 1000

bus = dbus.SessionBus()
notif = bus.get_object(item, path)
notify = dbus.Interface(notif, interface)
notify.Notify(app_name, id_num_to_replace, icon, title, text, actions_list, hint, time)
